document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".nav-link"),t=document.querySelectorAll(".dropdown-item"),o=document.querySelectorAll("section"),n=document.querySelectorAll(".progress-bar"),l=document.querySelectorAll(".timeline-item"),r=document.querySelector(".navbar-brand"),c=document.querySelector("#phone"),a=document.querySelector("form"),s=document.querySelector("#theme-toggle"),i=localStorage.getItem("theme")||"light";"scrollRestoration"in history&&(history.scrollRestoration="manual"),$(".carousel.owl-carousel").owlCarousel({margin:10,loop:!0,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,dots:!0,nav:!1,navText:["←","→"],onInitialized:function(e){$(".owl-dot").each((function(e){$(this).attr("aria-label","Aller à la slide "+(e+1))})),v()},onChanged:function(e){v()},responsive:{0:{items:1},800:{items:2},1200:{items:3}}}),$(".custom-owl-next").click((function(){$(".carousel").trigger("next.owl.carousel")})),$(".custom-owl-prev").click((function(){$(".carousel").trigger("prev.owl.carousel")})),"ontouchstart"in document.documentElement&&document.body.classList.add("touch-device");const d=document.querySelectorAll(".view-label-btn");let u=null;d.forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation();const o=e.closest(".timeline-panel")||e.closest(".card"),n=o.querySelector(".timeline-body")||o.querySelector(".card-label");if(u&&u!==e){const e=u.closest(".timeline-panel")||u.closest(".card");(e.querySelector(".timeline-body")||e.querySelector(".card-label")).style.display="none",u.textContent="Voir les détails"}!function(e,t){"block"===t.style.display?(t.style.display="none",e.textContent="Voir les détails",u=null):(t.style.display="block",e.textContent="Cacher les détails",u=e)}(e,n)}))})),"dark"===i&&(document.documentElement.setAttribute("data-theme","dark"),s.checked=!0),s.addEventListener("change",(()=>{s.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))})),r&&r.addEventListener("click",(()=>{window.location.href="/",setTimeout((()=>window.scrollTo(0,0)),100)}));const m=(e,t)=>{e.forEach((e=>{const o=e.getAttribute("href").substring(1);e.classList.toggle("active",o===t)}))},h=o=>{o.preventDefault();const n=o.currentTarget.getAttribute("href").substring(1),l=document.getElementById(n);if(l){const o=document.querySelector(".navbar").offsetHeight;window.scrollTo({top:l.offsetTop-o,behavior:"smooth"}),m(e,n),m(t,n)}};e.forEach((e=>e.addEventListener("click",h))),t.forEach((e=>e.addEventListener("click",h)));const y=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting)if(e.target.classList.contains("progress-bar")){const t=e.target,o=t.getAttribute("data-width");t.style.width=o}else e.target.classList.contains("timeline-item")&&e.target.classList.add("in-view")}))}),{threshold:.1});n.forEach((e=>y.observe(e))),l.forEach((e=>y.observe(e)));window.addEventListener("scroll",(()=>{let n="";o.forEach((e=>{const t=e.offsetTop-60;window.scrollY>=t&&(n=e.getAttribute("id"))})),m(e,n),m(t,n)}));const g=window.intlTelInput(c,{initialCountry:"auto",geoIpLookup(e){fetch("https://ipinfo.io?token=2ee5851481d61d").then((e=>e.json())).then((t=>{const o=t.country?t.country.toLowerCase():"fr";e(o),g.setCountry(o)})).catch((()=>{e("fr"),g.setCountry("fr")}))},utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/utils.js"});if(c.addEventListener("countrychange",(()=>{const e=g.getSelectedCountryData().maxNumberLength;c.maxLength=e||15})),a.addEventListener("submit",(e=>{const t=g.getNumber();c.value=t})),a){var f=JSON.parse(localStorage.getItem("formData"));if(f)for(var p in f){var b=a.querySelector('[name="'+p+'"]');b&&(b.value=f[p])}a.addEventListener("input",(function(){var e=new FormData(a),t={};e.forEach(((e,o)=>{t[o]=e})),localStorage.setItem("formData",JSON.stringify(t))})),a.addEventListener("submit",(function(){localStorage.removeItem("formData")}))}function v(){const e="dark"===document.documentElement.getAttribute("data-theme");document.querySelectorAll(".owl-dot").forEach((function(t){t.style.width="24px",t.style.height="24px",t.style.margin="5px",t.style.display="inline-block";const o=t.querySelector("span");o&&(o.style.width="100%",o.style.height="100%",o.style.display="block",o.style.borderRadius="50%",o.style.backgroundColor=e?"#3D63DD":"#FF8552")})),document.querySelectorAll(".owl-dot.active span").forEach((function(e){e.style.backgroundColor="#457B9D"}))}v(),s.addEventListener("change",(()=>{v()}))}));