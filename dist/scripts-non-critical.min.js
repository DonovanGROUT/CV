document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".nav-link"),t=document.querySelectorAll(".dropdown-item"),o=document.querySelectorAll(".progress-bar"),n=document.querySelectorAll(".timeline-item"),l=document.querySelector("#phone"),r=document.querySelector("form");$(".carousel.owl-carousel").owlCarousel({margin:10,loop:!0,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,dots:!0,nav:!1,navText:["←","→"],onInitialized:function(e){console.log("OwlCarousel initialized",e),console.log("Dots elements: ",$(".owl-dots").length),$(".owl-dot").each((function(e){$(this).attr("aria-label","Projet "+(e+1))})),$(".custom-owl-prev").attr("aria-label","Projet précédent"),$(".custom-owl-next").attr("aria-label","Projet suivant")},onChanged:function(e){h()},responsive:{0:{items:1},800:{items:2},1200:{items:3}}}),$(".custom-owl-next").click((function(){$(".carousel").trigger("next.owl.carousel")})),$(".custom-owl-prev").click((function(){$(".carousel").trigger("prev.owl.carousel")}));const a=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.contains("progress-bar")?e.target.style.width=e.target.getAttribute("data-width"):e.target.classList.contains("timeline-item")&&e.target.classList.add("in-view"))}))}),{threshold:.1});o.forEach((e=>a.observe(e))),n.forEach((e=>a.observe(e)));const s=(e,t)=>{e.forEach((e=>{e.classList.toggle("active",e.getAttribute("href").substring(1)===t)}))},c=o=>{o.preventDefault();const n=o.currentTarget.getAttribute("href").substring(1),l=document.getElementById(n);l&&(window.scrollTo({top:l.offsetTop-document.querySelector(".navbar").offsetHeight,behavior:"smooth"}),s(e,n),s(t,n))};e.forEach((e=>e.addEventListener("click",c))),t.forEach((e=>e.addEventListener("click",c)));const i=document.querySelectorAll(".view-label-btn");let u=null;const d="ontouchstart"in document.documentElement;function m(){if(u){const e=u.closest(".timeline-panel")||u.closest(".card");(e.querySelector(".timeline-body")||e.querySelector(".card-label")).style.display="none",u.textContent="Voir les détails",u=null}}$(".owl-carousel").on("changed.owl.carousel",(function(){m()})),d?i.forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation();const o=e.closest(".timeline-panel")||e.closest(".card"),n=o.querySelector(".timeline-body")||o.querySelector(".card-label");u&&u!==e&&m(),"block"===n.style.display?(n.style.display="none",e.textContent="Voir les détails"):(n.style.display="block",e.textContent="Cacher les détails",u=e)}))})):i.forEach((e=>{const t=e.closest(".timeline-panel")||e.closest(".card"),o=t.querySelector(".timeline-body")||t.querySelector(".card-label");t.addEventListener("mouseenter",(()=>{o.style.display="block"})),t.addEventListener("mouseleave",(()=>{o.style.display="none"}))}));const y=window.intlTelInput(l,{initialCountry:"auto",geoIpLookup(e){fetch("https://ipinfo.io?token=2ee5851481d61d").then((e=>e.json())).then((t=>{const o=t.country?t.country.toLowerCase():"fr";e(o),y.setCountry(o)})).catch((()=>{e("fr"),y.setCountry("fr")}))},utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/utils.js"});if(l.addEventListener("countrychange",(()=>{const e=y.getSelectedCountryData().maxNumberLength;l.maxLength=e||15})),r.addEventListener("submit",(e=>{const t=y.getNumber();l.value=t})),r){var f=JSON.parse(localStorage.getItem("formData"));if(f)for(var g in f){var p=r.querySelector('[name="'+g+'"]');p&&(p.value=f[g])}r.addEventListener("input",(function(){var e=new FormData(r),t={};e.forEach(((e,o)=>{t[o]=e})),localStorage.setItem("formData",JSON.stringify(t))})),r.addEventListener("submit",(function(){localStorage.removeItem("formData")}))}function h(){const e="dark"===document.documentElement.getAttribute("data-theme");document.querySelectorAll(".owl-dot span").forEach((t=>{t.style.backgroundColor=e?"#3D63DD":"#FF8552"}))}h()}));