document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelectorAll(".nav-link"),e=document.querySelectorAll(".dropdown-item"),o=document.querySelectorAll(".progress-bar"),r=document.querySelectorAll(".timeline-item"),n=document.querySelector("#phone"),l=document.querySelector("form");$(".carousel.owl-carousel").owlCarousel({margin:10,loop:!0,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,dots:!0,nav:!1,navText:["←","→"],onInitialized:function(t){console.log("OwlCarousel initialized",t),console.log("Dots elements: ",$(".owl-dots").length),$(".owl-dot").each((function(t){$(this).attr("aria-label","Projet "+(t+1))})),$(".custom-owl-prev").attr("aria-label","Projet précédent"),$(".custom-owl-next").attr("aria-label","Projet suivant")},onChanged:function(t){b()},responsive:{0:{items:1},800:{items:2},1200:{items:3}}}),$(".custom-owl-next").click((function(){$(".carousel").trigger("next.owl.carousel")})),$(".custom-owl-prev").click((function(){$(".carousel").trigger("prev.owl.carousel")}));const a=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(t.target.classList.contains("progress-bar")?t.target.style.width=t.target.getAttribute("data-width"):t.target.classList.contains("timeline-item")&&t.target.classList.add("in-view"))}))}),{threshold:.1});o.forEach((t=>a.observe(t))),r.forEach((t=>a.observe(t)));const s=(t,e)=>{t.forEach((t=>{t.classList.toggle("active",t.getAttribute("href").substring(1)===e)}))},i=o=>{o.preventDefault();const r=o.currentTarget.getAttribute("href").substring(1),n=document.getElementById(r);n&&(window.scrollTo({top:n.offsetTop-document.querySelector(".navbar").offsetHeight,behavior:"smooth"}),s(t,r),s(e,r))};t.forEach((t=>t.addEventListener("click",i))),e.forEach((t=>t.addEventListener("click",i)));const c=document.querySelectorAll(".view-label-btn");let u=null;function d(){const t=document.querySelectorAll(".iti__selected-flag"),e=document.querySelector(".iti__country-list");t.forEach((t=>{t.setAttribute("role","combobox");const o="iti-0__country-listbox";t.setAttribute("aria-controls",o),t.setAttribute("aria-owns",o);const r=e&&e.classList.contains("open");t.setAttribute("aria-expanded",r?"true":"false");const n=m.getSelectedCountryData(),l=n.iso2?`iti-0__item-${n.iso2}-preferred`:"";t.setAttribute("aria-activedescendant",l||""),t.setAttribute("aria-label","Drapeau sélectionné")}))}c.forEach((t=>{t.addEventListener("click",(e=>{e.stopPropagation();const o=t.closest(".timeline-panel")||t.closest(".card"),r=o.querySelector(".timeline-body")||o.querySelector(".card-label");if(u&&u!==t){const t=u.closest(".timeline-panel")||u.closest(".card");(t.querySelector(".timeline-body")||t.querySelector(".card-label")).style.display="none",u.textContent="Voir les détails"}"block"===r.style.display?(r.style.display="none",t.textContent="Voir les détails",u=null):(r.style.display="block",t.textContent="Cacher les détails",u=t)}))}));const m=window.intlTelInput(n,{initialCountry:"auto",geoIpLookup(t){fetch("https://ipinfo.io?token=2ee5851481d61d").then((t=>t.json())).then((e=>{const o=e.country?e.country.toLowerCase():"fr";t(o),m.setCountry(o),d()})).catch((()=>{t("fr"),m.setCountry("fr"),d()}))},utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/utils.js"});if(n.addEventListener("countrychange",(()=>{const t=m.getSelectedCountryData().maxNumberLength;n.maxLength=t||15,d()})),l.addEventListener("submit",(t=>{const e=m.getNumber();n.value=e,d()})),l){var f=JSON.parse(localStorage.getItem("formData"));if(f)for(var g in f){var y=l.querySelector('[name="'+g+'"]');y&&(y.value=f[g])}l.addEventListener("input",(function(){var t=new FormData(l),e={};t.forEach(((t,o)=>{e[o]=t})),localStorage.setItem("formData",JSON.stringify(e))})),l.addEventListener("submit",(function(){localStorage.removeItem("formData")}))}function b(){const t="dark"===document.documentElement.getAttribute("data-theme");document.querySelectorAll(".owl-dot span").forEach((e=>{e.style.backgroundColor=t?"#3D63DD":"#FF8552"}))}b()}));